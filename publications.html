<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Publications • CorIgnus Aerospace & Technology</title>
  <meta name="description" content="Architecture notes and public, high-level PDFs from CorIgnis Aerospace & Technology." />

  <style>
    :root{
      --bg0:#070A10;
      --bg1:#0B1020;
      --text:rgba(255,255,255,0.92);
      --muted:rgba(255,255,255,0.72);
      --faint:rgba(255,255,255,0.55);
      --line:rgba(255,255,255,0.12);
      --shadow:0 16px 60px rgba(0,0,0,0.55);
      --radius:18px;
      --max:1120px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 0%, rgba(125,211,252,0.12), transparent 55%),
        radial-gradient(1200px 900px at 90% 10%, rgba(167,139,250,0.10), transparent 55%),
        linear-gradient(180deg,var(--bg0),var(--bg1));
      min-height:100vh;
    }
    a{color:inherit}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}
    .wrap{max-width:var(--max);margin:0 auto;padding:22px;}
    .topbar{display:flex;justify-content:space-between;gap:14px;padding:10px 0 18px;align-items:center;}
    .brand{display:flex;gap:12px;text-decoration:none;align-items:center;}
    .brand img{width:44px;height:44px;object-fit:contain;filter:drop-shadow(0 8px 18px rgba(0,0,0,0.45));}
    .brand .name{display:flex;flex-direction:column;line-height:1.1;}
    .brand .name strong{font-size:14px;letter-spacing:0.2px;}
    .brand .name span{font-size:12px;color:var(--muted);}

    nav{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;}
    .navlink{
      text-decoration:none;
      font-size:13px;
      color:var(--muted);
      padding:10px 12px;
      border:1px solid transparent;
      border-radius:999px;
      background:rgba(255,255,255,0.02);
      transition:all 160ms ease;
    }
    .navlink:hover{color:var(--text);border-color:var(--line);background:rgba(255,255,255,0.05);}
    .navlink.active{color:var(--text);border-color:rgba(125,211,252,0.35);background:rgba(125,211,252,0.10);}
    @media(max-width:900px){nav{justify-content:flex-start;}}

    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.05));
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .inner{padding:22px;}
    .kicker{font-size:12px;letter-spacing:0.18em;text-transform:uppercase;color:var(--faint);}
    h1{margin:10px 0 10px;font-size:34px;line-height:1.1;letter-spacing:-0.02em;}
    .lead{color:var(--muted);font-size:15px;line-height:1.6;max-width:92ch;margin:0;}

    .callout{
      margin-top:14px;
      padding:14px 16px;
      border-radius:16px;
      border:1px dashed rgba(255,255,255,0.18);
      background:rgba(0,0,0,0.18);
      color:rgba(255,255,255,0.80);
      font-size:12.5px;
      line-height:1.55;
    }
    .callout ul{margin:10px 0 0 18px; padding:0;}
    .callout li{margin:6px 0; color:rgba(255,255,255,0.78);}

    .list{
      margin-top:14px;
      display:grid;
      gap:12px;
    }
    .item{
      padding:16px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.03);
      display:grid;
      grid-template-columns: 1fr auto;
      gap:12px;
      align-items:start;
    }
    @media(max-width:720px){.item{grid-template-columns:1fr;}}
    .title{margin:0 0 6px 0; font-size:15px;}
    .meta{color:var(--muted); font-size:13px; line-height:1.55; margin:0;}
    .tags{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;}
    .tag{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(0,0,0,0.16);
      color:rgba(255,255,255,0.78);
      white-space:nowrap;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      text-decoration:none;
      font-size:13px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(255,255,255,0.04);
      color:var(--text);
      transition:all 160ms ease;
      white-space:nowrap;
      height:fit-content;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,0.07);}

    .error{
      margin-top:14px;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(0,0,0,0.22);
      color:rgba(255,255,255,0.82);
      font-size:13px;
      line-height:1.55;
      display:none;
    }

    footer{
      margin:24px 0 8px 0;
      color:var(--faint);
      font-size:12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      justify-content:space-between;
      border-top:1px solid rgba(255,255,255,0.10);
      padding-top:16px;
    }
    .footerlinks{display:flex; gap:14px; flex-wrap:wrap;}
    .footerlinks a{color:var(--faint); text-decoration:none;}
    .footerlinks a:hover{color:var(--text); text-decoration:underline;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <a class="brand" href="index.html" aria-label="CorIgnis Home">
        <img src="assets/img/logo.png" alt="CorIgnis logo" />
        <div class="name">
          <strong>CorIgnis Aerospace &amp; Technology</strong>
          <span>Public architecture notes • PDFs</span>
        </div>
      </a>

      <nav aria-label="Primary navigation">
        <a class="navlink" href="index.html">Home</a>
        <a class="navlink" href="company.html">Company</a>
        <a class="navlink" href="projects.html">Projects</a>
        <a class="navlink active" href="publications.html">Publications</a>
        <a class="navlink" href="updates.html">Updates</a>
        <a class="navlink" href="contact.html">Contact</a>
      </nav>
    </div>

    <section class="card">
      <div class="inner">
        <div class="kicker">Publications</div>
        <h1>Architecture &amp; Public Notes</h1>
        <p class="lead">
          Public documents are intentionally high-level and architecture-oriented. They are provided for peer discussion,
          grant/program submissions, and early stakeholder evaluation.
        </p>

        <div class="callout" id="scopeBox">
          <strong id="scopeTitle">Scope &amp; Intent</strong>
          <ul id="scopeList"></ul>
        </div>
      </div>
    </section>

    <section class="list" id="pubList" aria-label="Publications list"></section>
    <div class="error" id="errorBox"></div>

    <footer>
      <div>© <span id="y"></span> CorIgnis Aerospace &amp; Technology. All rights reserved.</div>
      <div class="footerlinks">
        <a href="projects.html">Projects</a>
        <a href="updates.html">Updates</a>
        <a href="contact.html">Contact</a>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s => ({
        "&":"&amp;", "<":"&lt;", ">":"&gt;", "\"":"&quot;", "'":"&#39;"
      }[s]));
    }

    function el(tag, cls, text){
      const n = document.createElement(tag);
      if(cls) n.className = cls;
      if(text !== undefined) n.textContent = text;
      return n;
    }

    function addTagRow(container, tags){
      if(!Array.isArray(tags) || tags.length === 0) return;
      const row = el("div", "tags");
      tags.forEach(t => row.appendChild(el("div", "tag", String(t))));
      container.appendChild(row);
    }

    async function loadPublications(){
      const pubList = document.getElementById("pubList");
      const errorBox = document.getElementById("errorBox");
      const scopeTitle = document.getElementById("scopeTitle");
      const scopeList = document.getElementById("scopeList");

      try{
        const res = await fetch("data/publications.json", { cache: "no-store" });
        if(!res.ok) throw new Error(`Could not load data/publications.json (HTTP ${res.status})`);
        const data = await res.json();

        // Scope box
        if(data.disclaimer && typeof data.disclaimer === "object"){
          if(data.disclaimer.title) scopeTitle.textContent = data.disclaimer.title;
          scopeList.innerHTML = "";
          const bullets = Array.isArray(data.disclaimer.bullets) ? data.disclaimer.bullets : [];
          bullets.forEach(b => {
            const li = document.createElement("li");
            li.textContent = String(b);
            scopeList.appendChild(li);
          });
        }

        const pubs = Array.isArray(data.publications) ? data.publications : [];

        // Optional: newest first by date string (YYYY-MM)
        pubs.sort((a,b) => String(b.date || "").localeCompare(String(a.date || "")));

        if(pubs.length === 0){
          const empty = el("div", "error");
          empty.style.display = "block";
          empty.textContent = "No public documents posted yet.";
          pubList.appendChild(empty);
          return;
        }

        pubs.forEach(p => {
          const item = el("div", "item");

          const left = document.createElement("div");
          const title = el("h3", "title", p.title || "Untitled document");
          left.appendChild(title);

          const metaParts = [];
          if(p.type) metaParts.push(String(p.type));
          if(p.status) metaParts.push(String(p.status));
          if(p.date) metaParts.push(String(p.date));
          if(p.version) metaParts.push(String(p.version));

          const meta = el("p", "meta", metaParts.join(" • "));
          left.appendChild(meta);

          if(p.notes){
            const notes = el("p", "meta", String(p.notes));
            notes.style.marginTop = "8px";
            left.appendChild(notes);
          }

          // Tags (optional)
          addTagRow(left, p.tags);

          const right = document.createElement("div");
          const path = (p.path || "").trim();

          if(path){
            const a = document.createElement("a");
            a.className = "btn";
            a.href = path;             // relative path: docs/...
            a.target = "_blank";
            a.rel = "noopener noreferrer";
            a.textContent = "Open PDF";
            right.appendChild(a);
          } else {
            const missing = el("div", "meta", "Link pending");
            right.appendChild(missing);
          }

          item.appendChild(left);
          item.appendChild(right);
          pubList.appendChild(item);
        });

      } catch(err){
        errorBox.style.display = "block";
        errorBox.innerHTML =
          "<strong>Publications feed error:</strong> " + escapeHtml(err.message) +
          "<br><br>Check that <code>data/publications.json</code> exists and is valid JSON.";
      }
    }

    loadPublications();
  </script>
</body>
</html>
